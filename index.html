<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FartLabs</title>

    <style>
pre {
  margin: 0 auto;
  border: 20px solid #C3EF3C;
  border-image-slice: 34 34 34 34;
border-image-width: 20px 20px 20px 20px;
border-image-outset: 10px 10px 10px 10px;
border-image-repeat: stretch stretch;
border-image-source: url("empty-tube.svg");
border-style: solid;
}

        pre code {
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>FartLabs</h1>

    <pre>
      <code>
import { Lab } from "./labs.ts";

export interface Note {
  title?: string;
  content: string;
}

export const notesLab = new Lab()
  .variable("notes", new Map<string, Note>())
  .procedure(
    "notes.add",
    (note: Note, { notes }) => {
      const id = crypto.randomUUID();
      notes.set(id, note);
      return { id };
    },
    ["notes"],
  )
  .procedure(
    "notes.get",
    ({ id }: { id: string }, { notes }) => {
      return notes.get(id);
    },
    ["notes"],
  )
  .procedure(
    "notes.list",
    (_, { notes }) => {
      return Array.from(notes.values());
    },
    ["notes"],
  );

notesLab.execute("notes.add", { title: "Hello", content: "World" });

const notes = notesLab.execute("notes.list", {});
console.log(notes);
        </code>
    </pre>
</body>
</html>