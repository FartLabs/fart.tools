<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FartLabs</title>

<style>
body {
  background-color: #111;
  color: #ddd;
}

h1 {
  text-align: center;
}

.border-tube-green {
  border: 28px solid transparent;
  border-image-slice: 31;
  border-image-width: 28px;
  border-image-outset: 4px;
  border-image-repeat: stretch stretch;
  border-image-source: url("tube.svg");
  border-style: solid;
  box-shadow: 0 0 42px 8px #C3EF3Caa;
  padding: 20px;
  border-radius: 2em;
}

pre {
  margin: 0 auto;
  width: max-content;
}

pre code {
  white-space: pre-wrap;
}
</style>
</head>
<body>
    <h1>FartLabs</h1>
<pre class="border-tube-green"><code>import { Lab } from "./labs.ts";

export interface Note {
  title?: string;
  content: string;
}

export const notesLab = new Lab()
  .variable("notes", new Map<string, Note>())
  .procedure(
    "notes.add",
    (note: Note, { notes }) => {
      const id = crypto.randomUUID();
      notes.set(id, note);
      return { id };
    },
    ["notes"],
  )
  .procedure(
    "notes.get",
    ({ id }: { id: string }, { notes }) => {
      return notes.get(id);
    },
    ["notes"],
  )
  .procedure(
    "notes.list",
    (_, { notes }) => {
      return Array.from(notes.values());
    },
    ["notes"],
  );

notesLab.execute("notes.add", { title: "Hello", content: "World" });

const notes = notesLab.execute("notes.list", {});
console.log(notes);</code></pre>
</body>
</html>